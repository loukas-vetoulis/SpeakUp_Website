* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Montserrat', sans-serif;
    background-color: var(--white);
    overflow-x: hidden;
    color: #333;
    line-height: 1.5;
    /* Enforce vertical stacking */
    display: flex;
    flex-direction: column;
}

.transition-curtain-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 9999;
    pointer-events: none; /* Let clicks pass through when hidden */
    display: flex;
    flex-direction: column;
}

/* The Layers */
.curtain-layer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transform-origin: bottom; /* Grow from bottom */
    transform: scaleY(1); /* Default: Covering the screen */
    transition: transform 0.8s cubic-bezier(0.77, 0, 0.175, 1); /* "Quart" Ease */
}

/* LAYER COLORS (Using your variables) */
.layer-1 { background-color: var(--brand-pale); z-index: 100; transition-delay: 0.2s; }
.layer-2 { background-color: var(--brand-lilac); z-index: 101; transition-delay: 0.1s; }
.layer-3 { background-color: var(--brand-dark);  z-index: 102; transition-delay: 0s; }

/* --- STATE 1: PAGE LOADED (Reveal Content) --- */
/* When page loads, curtains shrink UP (ScaleY 0) */
body.page-loaded .curtain-layer {
    transform: scaleY(0);
    transform-origin: top; /* Shrink towards the top */
}

/* --- STATE 2: PAGE EXITING (Cover Content) --- */
/* When leaving, curtains grow UP from bottom */
body.page-exiting .curtain-layer {
    transform: scaleY(1);
    transform-origin: bottom; /* Grow from the bottom */
}

/* Ensure the body is visible immediately */
body { opacity: 1 !important; }