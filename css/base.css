/* --- GLOBAL RESETS --- */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Montserrat', sans-serif;
    background-color: var(--white);
    overflow-x: hidden;
    color: #333;
    line-height: 1.5;
    display: flex;
    flex-direction: column;
    /* Ensure body is visible immediately, curtain handles the rest */
    opacity: 1 !important; 
}

/* --- TRANSITION CURTAIN CONTAINER --- */
.transition-curtain-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100vh; /* Use 100vh to ensure full screen cover */
    z-index: 99999; /* Higher than everything */
    pointer-events: none; /* Allows clicks to pass through when hidden */
    display: flex;
    flex-direction: column;
}

/* --- THE CURTAIN LAYERS --- */
.curtain-layer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transform-origin: bottom; /* Default grow direction */
    transform: scaleY(1); /* Start covering screen */
    will-change: transform;
    
    /* "Quart" Ease for Premium Feel */
    transition: transform 0.8s cubic-bezier(0.77, 0, 0.175, 1); 
}

/* --- LAYER COLORS & STAGGERING --- */
/* Layer 1 (Lightest - Pale) */
.layer-1 { 
    background-color: var(--brand-pale, #f3e5f5); 
    z-index: 100; 
    transition-delay: 0.2s; /* Leaves last */
}

/* Layer 2 (Mid - Lilac) */
.layer-2 { 
    background-color: var(--brand-lilac, #d1c4e9); 
    z-index: 101; 
    transition-delay: 0.1s; 
}

/* Layer 3 (Darkest - Main Brand Color) */
.layer-3 { 
    background-color: var(--brand-dark, #4a148c); 
    z-index: 102; 
    transition-delay: 0s; /* Leaves first on reveal */
}

/* --- ANIMATION STATE 1: REVEAL (Page Load) --- */
/* Curtains shrink UP away from the screen */
body.page-loaded .curtain-layer {
    transform: scaleY(0);
    transform-origin: top; 
}

/* --- ANIMATION STATE 2: EXIT (Link Click) --- */
/* Curtains grow UP from bottom to cover screen */
body.page-exiting .curtain-layer {
    transform: scaleY(1);
    transform-origin: bottom;
    transition-delay: 0s; /* No delay on exit, cover fast */
}